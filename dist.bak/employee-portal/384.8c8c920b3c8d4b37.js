"use strict";(self.webpackChunkemployee_portal=self.webpackChunkemployee_portal||[]).push([[384],{9384:(f,h,t)=>{t.r(h),t.d(h,{ChangePasswordModule:()=>_});var p=t(6814),l=t(776),w=t(3519),a=t.n(w);class u{constructor(){this.curr_password=null,this.new_password=null,this.re_new_password=null}}var e=t(9212),g=t(6906),c=t(95);const v=[{path:"",component:(()=>{class n{constructor(r,o,s){this.employeeService=r,this.route=o,this.router=s,this.employee=null,this.validationErrors=[],this.changepassword=new u}ngOnInit(){this.employeeService.getMyProfile().subscribe(r=>{this.employee=r})}changePassword(){if(null!==this.changepassword.curr_password)if(null!==this.changepassword.new_password)if(null!==this.changepassword.re_new_password)if(this.validatePassword(),this.validationErrors.length>0){const r=this.validationErrors.map((o,s)=>`${s+1}. ${o}`).join("\n");a().fire({icon:"error",title:"Error",html:r.replace(/\n/g,"<br/>"),width:"auto"})}else console.log(this.changepassword),this.employeeService.changePassword(this.changepassword).subscribe(r=>{console.log(r),a().fire({icon:"success",title:"Success",text:"Password updated successfully. You have been logged out. Please log in again."}).then(o=>{o.isConfirmed&&(sessionStorage.removeItem("user"),sessionStorage.removeItem("authorisation"),sessionStorage.removeItem("isLoggedIn"),this.router.navigate(["/login"]))})},r=>{console.log(r),console.log(r.status),console.log(r.error),a().fire({icon:"error",title:"API Error",text:r.error.message})});else a().fire({icon:"error",title:"Error",text:"Please Re-Enter New Password"});else a().fire({icon:"error",title:"Error",text:"Please Enter New Password"});else a().fire({icon:"error",title:"Error",text:"Please Enter Current Password"})}validatePassword(){const r=/^[a-zA-Z0-9!@#$%&*()_-]{8,20}$/;if(null===this.changepassword.curr_password||r.test(this.changepassword.curr_password)){const s=this.validationErrors.indexOf("Invalid Current Password");-1!==s&&this.validationErrors.splice(s,1)}else this.validationErrors.push("Invalid Current Password"),a().fire({icon:"error",title:"Error",text:"Invalid Current Password"});if(null===this.changepassword.new_password||r.test(this.changepassword.new_password)){const s=this.validationErrors.indexOf("Invalid New Password");-1!==s&&this.validationErrors.splice(s,1)}else this.validationErrors.push("Invalid New Password"),a().fire({icon:"error",title:"Error",text:"Invalid New Password"});if(null===this.changepassword.re_new_password||r.test(this.changepassword.re_new_password)){const s=this.validationErrors.indexOf("Invalid Re-Enter Password");-1!==s&&this.validationErrors.splice(s,1)}else this.validationErrors.push("Invalid Re-Enter Password"),a().fire({icon:"error",title:"Error",text:"Invalid Re-Enter Password"});if(null!==this.changepassword.new_password&&null!==this.changepassword.re_new_password&&this.changepassword.new_password!==this.changepassword.re_new_password)this.validationErrors.push("New Password and Re-Enter Password do not match"),a().fire({icon:"error",title:"Error",text:"New Password and Re-Enter Password do not match"});else{const s=this.validationErrors.indexOf("New Password and Re-Enter Password do not match");-1!==s&&this.validationErrors.splice(s,1)}}hoverClick(r){const o=r.currentTarget;o&&(o.classList.add("clicked"),setTimeout(()=>{o.classList.remove("clicked")},200))}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(g.G),e.Y36(l.gz),e.Y36(l.F0))};static#s=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-change-password"]],decls:79,vars:8,consts:[[1,"container"],[1,"card","shadow"],[1,"card-header"],[1,"float-start"],[1,"float-end"],[1,"btn","btn-outline-info","enlarge-on-hover",3,"routerLink","click"],[1,"row"],[1,"card-body"],[1,"row","mb-12"],[1,"col-md-12"],[1,"card","shadow","card-warning"],[1,"form-group"],[1,"form-label","text-danger"],[1,"col-md-5"],[1,"row","mb-12",2,"overflow","auto"],[1,"col-md-8"],[1,"input-group"],[1,"col-md-4"],["alt","Profile Photo","title","Profile Photo",1,"rounded-circle",2,"width","128px","height","128px",3,"src"],[1,"col-md-7"],["type","password",1,"form-control",3,"ngModel","ngModelChange","change"],[2,"text-align","center"],["type","button",1,"btn","btn-outline-primary","enlarge-on-hover",3,"click"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"b"),e._uU(5,"Change Password"),e.qZA()(),e.TgZ(6,"div",4)(7,"a",5),e.NdJ("click",function(i){return s.hoverClick(i)}),e._uU(8," Back "),e.qZA()()(),e.TgZ(9,"div",6),e._uU(10,"\xa0"),e.qZA(),e.TgZ(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",7)(16,"div",11)(17,"label",12),e._uU(18," Note:- Passwords must have a minimum of 8 characters and a maximum of 20 characters, and they may only include alphanumeric characters and select special characters(!@#$%&*()_-). "),e.qZA()()()()()()(),e.TgZ(19,"div",7)(20,"div",8)(21,"div",13)(22,"div",10)(23,"div",7)(24,"div",14)(25,"div",15)(26,"div",8)(27,"div",9)(28,"div",11)(29,"label"),e._uU(30,"Id Card No"),e.qZA()(),e.TgZ(31,"div",16),e._uU(32),e.qZA()()(),e.TgZ(33,"div",8)(34,"div",9)(35,"div",11)(36,"label"),e._uU(37,"Name"),e.qZA()(),e.TgZ(38,"div",16),e._uU(39),e.qZA()()()(),e.TgZ(40,"div",17)(41,"span"),e._UZ(42,"img",18),e.qZA()()()()()(),e.TgZ(43,"div",19)(44,"div",10)(45,"div",7)(46,"div",8)(47,"div",9)(48,"div",6)(49,"div",9)(50,"div",11)(51,"label")(52,"b"),e._uU(53,"Current Password"),e.qZA()()(),e.TgZ(54,"div",16)(55,"input",20),e.NdJ("ngModelChange",function(i){return s.changepassword.curr_password=i})("change",function(){return s.validatePassword()}),e.qZA()()()(),e.TgZ(56,"div",6)(57,"div",9)(58,"div",11)(59,"label")(60,"b"),e._uU(61,"New Password"),e.qZA()()(),e.TgZ(62,"div",16)(63,"input",20),e.NdJ("ngModelChange",function(i){return s.changepassword.new_password=i})("change",function(){return s.validatePassword()}),e.qZA()()()(),e.TgZ(64,"div",6)(65,"div",9)(66,"div",11)(67,"label")(68,"b"),e._uU(69,"Re-Enter New Password"),e.qZA()()(),e.TgZ(70,"div",16)(71,"input",20),e.NdJ("ngModelChange",function(i){return s.changepassword.re_new_password=i})("change",function(){return s.validatePassword()}),e.qZA()()()(),e.TgZ(72,"div",6),e._uU(73,"\xa0"),e.qZA(),e.TgZ(74,"div",6)(75,"div",9)(76,"div",21)(77,"button",22),e.NdJ("click",function(i){return s.hoverClick(i)})("click",function(){return s.changePassword()}),e._uU(78," Update Password "),e.qZA()()()()()()()()()()()()()),2&o&&(e.xp6(7),e.Q6J("routerLink","/dashboard"),e.xp6(25),e.hij(" ",s.employee.id_cards[0].card_no," "),e.xp6(7),e.AsE(" ",s.employee.emp_title," ",s.employee.emp_name," "),e.xp6(3),e.Q6J("src",s.employee.profile_photo,e.LSH),e.xp6(13),e.Q6J("ngModel",s.changepassword.curr_password),e.xp6(8),e.Q6J("ngModel",s.changepassword.new_password),e.xp6(8),e.Q6J("ngModel",s.changepassword.re_new_password))},dependencies:[l.rH,c.Fj,c.JJ,c.On]})}return n})()}];let m=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#s=this.\u0275mod=e.oAB({type:n});static#r=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(v),l.Bz]})}return n})(),_=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#s=this.\u0275mod=e.oAB({type:n});static#r=this.\u0275inj=e.cJS({imports:[p.ez,m]})}return n})()}}]);