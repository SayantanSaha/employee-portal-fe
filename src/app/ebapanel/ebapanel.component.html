<script src="../app.module.ts" xmlns="http://www.w3.org/1999/html"></script>
<div class="container">
  <ng-container *ngIf="user && user.role">
    <ng-container *ngFor="let role of user.role">
      <ng-container *ngIf="role === 4 || role === 5 || role === 6|| role === 9|| role === 10">
        <div class="row">
          <div class="container">
            <div class="card shadow">
              <div class="card-header">
                <div class="card-title">
                  <div class="row">
                    <div class="col-6">
                      <b>EBA({{ebadashboardData.totalApplications}})</b>
                    </div>
                    <div class="col-6" style="text-align: right">
                      <button class="btn btn-success enlarge-hover " (click)=" hoverClick($event);opensearch()"> <i
                          class="bi bi-search"></i> </button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card-body"
                style="background: linear-gradient(to bottom right, rgba(1, 255, 255, 0.36), transparent);">
                <div class="row">
                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <!--                  <a routerLink="/eba-pending" style="text-decoration: none; color: inherit;">-->
                    <div class="card shadow enlarge-hover" (click)=" hoverClick($event);searchEba(8)">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-warning">
                            <!--                            <a routerLink="/eba-pending" >-->
                            <i class="bi bi-people"></i>
                            <!--                            </a>-->
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Returned</span>
                            </p>
                            {{ebadashboardData.returned}}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <!--                  <a routerLink="/eba-pending" style="text-decoration: none; color: inherit;">-->
                    <div class="card shadow enlarge-hover" (click)="hoverClick($event); searchEba(4)">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-warning">
                            <i class="bi bi-people"></i>
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Pending at DH</span>
                            </p>
                            {{ebadashboardData.pendingdh}}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!--                  </a>-->
                  </div>
                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <!--                  <a routerLink="/eba-pending" style="text-decoration: none; color: inherit;">-->
                    <div class="card shadow enlarge-hover" (click)=" hoverClick($event);searchEba(5)">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-success">
                            <!--                            <a routerLink="/eba-pending">-->
                            <i class="bi bi-people"></i>
                            <!--                            </a>-->
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Pending at SO</span>
                            </p>
                            {{ebadashboardData.pendingso}}
                          </div>
                        </div>
                      </div>
                    </div>
                    <!--                  </a>-->
                  </div>



                </div>
                <div class="row">
                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <!--                  <a routerLink="/eba-pending" style="text-decoration: none; color: inherit;">-->
                    <div class="card shadow enlarge-hover" (click)=" hoverClick($event);searchEba(6)">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-danger">
                            <!--                            <a routerLink="/eba-pending">-->
                            <i class="bi bi-people"></i>
                            <!--                            </a>-->
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Pending at US</span>
                            </p>
                            {{ebadashboardData.pendingus}}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <!--                  <a routerLink="/eba-pending" style="text-decoration: none; color: inherit;">-->
                    <div class="card shadow enlarge-hover" (click)=" hoverClick($event);searchEba(9)">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-danger">
                            <!--                            <a routerLink="/eba-pending" >-->
                            <i class="bi bi-people"></i>
                            <!--                            </a>-->
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Pending at Director</span>
                            </p>
                            {{ebadashboardData.pendingdirector}}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <a routerLink="/eba-print" style="text-decoration: none; color: inherit;">
                      <div class="card shadow enlarge-hover" (click)=" hoverClick($event);searchEba(10)">
                        <div class="card-body" style="overflow: auto;">
                          <div class="d-flex align-items-center">
                            <div class="enlarge-hover card-icon rounded-circle btn btn-outline-danger">
                              <!--                          <a routerLink="/eba-print" >-->
                              <i class="bi bi-people"></i>
                              <!--                          </a>-->
                            </div>
                            <div class="ps-5">
                              <p>
                                <span class="text-muted small pt-2 ps-1 fw-bold">Pending at ASP</span>
                              </p>
                              {{ebadashboardData.pendingasp}}
                            </div>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>



                </div>
                <div class="row">
                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <div class="card shadow enlarge-hover" (click)=" hoverClick($event);searchEba(7)">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-primary">
                            <!--                          <a routerLink="/eba-print" >-->
                            <i class="bi bi-people"></i>
                            <!--                          </a>-->
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Approved</span>
                            </p>
                            {{ebadashboardData.approvedCount}}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <a routerLink="/eba-print" style="text-decoration: none; color: inherit;">
                      <div class="card shadow enlarge-hover" (click)=" hoverClick($event)">
                        <div class="card-body" style="overflow: auto;">
                          <div class="d-flex align-items-center">
                            <div class="enlarge-hover card-icon rounded-circle btn btn-outline-info">
                              <!--                          <a routerLink="/eba-print" >-->
                              <i class="bi bi-people"></i>
                              <!--                          </a>-->
                            </div>
                            <div class="ps-5">
                              <p>
                                <span class="text-muted small pt-2 ps-1 fw-bold">Print</span>
                              </p>
                              {{ebadashboardData.ebaprint}}
                            </div>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <div class="card shadow enlarge-hover" (click)=" hoverClick($event);ebapasses()">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-success">
                            <!--                          <a routerLink="/eba-print" >-->
                            <i class="bi bi-people"></i>
                            <!--                          </a>-->
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Total Eba passes</span>
                            </p>
                            {{ebadashboardData.active}}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <!-- <a routerLink="/EbaApplyForm" ></a> -->
                    <div class="card shadow enlarge-hover" (click)="hoverClick($event);pullEbaPopup()">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-success">
                            <!-- <a routerLink="/EbaApplyForm" > -->
                            <i class="bi bi-pencil-square"></i>
                            <!-- </a> -->
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Form</span>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-4 col-lg-4 col-sm-4">
                    <!-- <a routerLink="/EbaApplyForm" ></a> -->
                    <div class="card shadow enlarge-hover" (click)="hoverClick($event);pullEmpPopup()">
                      <div class="card-body" style="overflow: auto;">
                        <div class="d-flex align-items-center">
                          <div class="enlarge-hover card-icon rounded-circle btn btn-outline-success">
                            <!-- <a routerLink="/EbaApplyForm" > -->
                            <i class="bi bi-pencil-square"></i>
                            <!-- </a> -->
                          </div>
                          <div class="ps-5">
                            <p>
                              <span class="text-muted small pt-2 ps-1 fw-bold">Emp Form</span>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>



                </div>
                <br>

                <div class="row">
                  <div class="col-md-12">
                    <div class="card shadow">
                      <div class="card-header">
                        <div class="card-title">
                          <b>Today's List({{ebadashboardData.todayList.length}})</b>
                        </div>
                      </div>
                      <div class="card-body" style="overflow: auto;">
                        <div style="padding: 1%">
                          <div class="row mb-12">
                            <table class="table table-stripped">
                              <thead>
                                <tr>
                                  <th>Sl No.</th>
                                  <th>Reg no.</th>
                                  <th>Id Card No.</th>
                                  <th>Employee Name</th>
                                  <!-- <th>Email ID</th> -->
                                  <th>Mobile No.</th>
                                  <th>Last Updated Date</th>
                                  <th>Action</th>
                                </tr>
                              </thead>
                              <tbody *ngIf="ebadashboardData && ebadashboardData.todayList">
                                <tr *ngFor="let ebaapplication of ebadashboardData.todayList; let i = index">
                                  <td>{{ i + 1 }}</td>
                                  <td>{{ ebaapplication.reg_no }}</td>
                                  <td>{{ ebaapplication.id_cards?.[0]?.card_no}}</td>
                                  <td>{{ ebaapplication.employee.emp_name }}</td>
                                  <td>{{ ebaapplication.employee.mobile }}</td>
                                  <td>{{ formatDate(ebaapplication.created_at) }}</td>
                                  <td>
                                    <a class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"
                                      [routerLink]="'/eba-form/' + 'view/'+'EBA/'+ebaapplication.id">Details</a>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </ng-container>
</div>

<td>
  <ng-container>
    <div class="modal modal-above-header" tabindex="-1" data-bs-backdrop="false"
      [ngStyle]="{'display': displayEmpCard  }"
      style="backdrop-filter: blur(3px);background-color: rgba(128, 128, 128, 0.7); overflow-y: auto;">
      <div class="modal-dialog modal-dialog-centered modal-m" *ngIf=" !showEmpCardDetails && !NewEmpCardForm">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <b>Fetch Emp Card Details </b>
            </h5>
          </div>

          <div class="modal-body">
            <div class="row">
              <div class="col-md-4" style="margin-left: 1%;">
                <label class="form-label">Emp Card:</label>
              </div>
              <div class="col-md-8" style="margin-left: -7%">
                <input type="text" class="form-control" placeholder="EMP-xxxxxxxx" aria-label="Eba card"
                  [(ngModel)]="EmpCardNo">
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary enlarge-on-hover" (click)="hoverClick($event)"
              (click)="closeEmpPopup()">
              Close
            </button>

            <button type="button" class="btn btn-outline-warning enlarge-on-hover" (click)="hoverClick($event)"
              (click)="NewEmpCard()">
              New Form
            </button>

            <button type="button" class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"
              (click)="EmpCardDetail()" *ngIf="EmpCardNo && EmpCardNo!==null">
              Fetch
            </button>
          </div>
        </div>
      </div>

      <div class="modal-dialog modal-dialog-centered modal-xl" *ngIf="showEmpCardDetails || NewEmpCardForm">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <!-- <b *ngIf="showEmpCardDetails">{{EmpCardData.pass_no}}</b> -->
              <b>Emp Card Form</b>
            </h5>
          </div>

          <div class="modal-body">
            <!-- <div id="div_grid" style="text-align: center;">
              <div style="margin: 5%;" class="row"> -->
            <!-- <table width="100%" border="0" cellpadding="3" cellspacing="2"
                  style="border-collapse: collapse; border-color: #efdccd; background-color: #ffffff;"> -->
            <!-- <tr> -->
            <!-- <td style="width: 70%; vertical-align: top;"> -->
            <!-- <div class="form-group" style="display: flex; ">
                        <label for="name_print"
                          style="width: 150px;text-align: right;font-weight: bold;">Name:&nbsp;&nbsp;&nbsp;</label>
                        <input *ngIf="NewEmpCardForm" type="text" id="name_print" class="form-control"
                          [(ngModel)]="EmpCardData.name_print" name="name_print" style="flex-grow: 1;" />
                        <div *ngIf="showEmpCardDetails">{{EmpCardData.name_print}}</div>
                      </div>
                      <br>
                      <div class="form-group" style="display: flex; ">
                        <label for="dob"
                          style="width: 150px; text-align: right;font-weight: bold; text-align: right;font-weight: bold;">Date
                          of Birth:&nbsp;&nbsp;&nbsp;</label>
                        <input *ngIf="NewEmpCardForm" type="date" id="dob" class="form-control"
                          [(ngModel)]="EmpCardData.dob" name="dob" style="flex-grow: 1;" />
                        <div *ngIf="showEmpCardDetails">{{EmpCardData.dob | date:'dd-MMM-yyyy' }}</div>
                      </div>
                      <br> -->

            <!-- <div class="form-group" style="display: flex; ">
                        <label for="mob_no"
                          style="width: 150px; text-align: right;font-weight: bold;text-align: right;">Mobile
                          No:&nbsp;&nbsp;&nbsp;</label>
                        <input *ngIf="NewEmpCardForm" type="text" id="mob_no" class="form-control"
                          [(ngModel)]="EmpCardData.mob_no" name="mob_no" style="flex-grow: 1;" />
                        <div *ngIf="showEmpCardDetails">{{EmpCardData.mob_no}}</div>
                      </div>
                      <br> -->
            <!-- <div class="form-group" style="display: flex; ">
                        <label for="mob_no"
                          style="width: 150px; text-align: right;font-weight: bold;text-align: right;">office:&nbsp;&nbsp;&nbsp;</label>
                        <select *ngIf="NewEmpCardForm" class="form-control" [(ngModel)]="EmpCardData.office_code"
                          (click)="findDesg()">
                          <option [ngValue]="null">Select office</option>
                          <option [ngValue]="office.office_code" *ngFor="let office of offices">{{office.org_desc}}
                          </option>
                        </select>
                        <div *ngIf="showEmpCardDetails">{{EmpCardData.office_name}}</div>
                      </div>
                      <br>

                      <div class="form-group" style="display: flex; ">
                        <label for="mob_no"
                          style="width: 150px; text-align: right;font-weight: bold;text-align: right;">designation:&nbsp;&nbsp;&nbsp;</label>
                        <select *ngIf="NewEmpCardForm" class="form-control" [(ngModel)]="EmpCardData.designation_code">
                          <option [ngValue]="null">Select designation </option>
                          <option [ngValue]="designation.designation_code" *ngFor="let designation of designations">
                            {{designation.desg_desc}}</option>
                        </select>
                        <div *ngIf="showEmpCardDetails">{{EmpCardData.deg_name}}</div>
                      </div>
                      <br> -->


            <!-- <div class="form-group" style="display: flex; ">
                        <label for="email"
                          style="width: 150px; text-align: right;font-weight: bold;">Email:&nbsp;&nbsp;&nbsp;</label>
                        <input *ngIf="NewEmpCardForm" type="email" id="email" class="form-control"
                          [(ngModel)]="EmpCardData.email" name="email" style="flex-grow: 1;" />
                        <div *ngIf="showEmpCardDetails">{{EmpCardData.email}}</div>
                      </div>
                      <br> -->


            <!-- <div class="form-group" style="display: flex; " *ngIf="showEmpCardDetails">
                        <label for="qtr" style="width: 150px; text-align: right;font-weight: bold;">Permanent Address:
                          &nbsp;&nbsp;&nbsp;</label>
                        <div>{{EmpCardData.qtr}}</div>
                      </div>
                      <br *ngIf="showEmpCardDetails">

                      <div class="form-group" style="display: flex; ">
                        <label for="qtr" style="width: 150px; text-align: right;font-weight: bold;">Permanent
                          Address:&nbsp;&nbsp;&nbsp;</label>
                        <textarea class="form-control" placeholder="Address" aria-label="address"
                          [(ngModel)]="EmpCardData.curr_add"></textarea>
                      </div>
                      <br>

                      <div class="form-group" style="display: flex; ">
                        <label for="qtr" style="width: 150px; text-align: right;font-weight: bold;">&nbsp;</label>
                        <select class="form-control" [(ngModel)]="EmpCardData.curr_state"
                          (change)="onStateChange(EmpCardData.curr_state)">
                          <option [ngValue]="null">Select State </option>
                          <option [ngValue]="state.id" *ngFor="let state of states">{{state.state_name}}</option>
                        </select>
                        <select class="form-control" [(ngModel)]="EmpCardData.curr_district">
                          <option [ngValue]="null">Select District </option>
                          <option [ngValue]="dist.id" *ngFor="let dist of currDistricts">{{dist.district_name}}
                          </option>
                        </select>
                        <input type="text" maxlength="6" minlength="6" class="form-control" placeholder="PIN"
                          aria-label="pin" [(ngModel)]="EmpCardData.curr_pin">
                      </div>
                      <br> -->
            <!-- <div class="form-group" style="display: flex; " *ngIf="showEmpCardDetails">
                        <label for="blood_typ_name" style="width: 150px; text-align: right;font-weight: bold;">Blood
                          Type:&nbsp;&nbsp;&nbsp;</label>
                        <div>{{EmpCardData.blood_typ_name}}</div>
                      </div>
                      <br *ngIf="showEmpCardDetails"> -->
            <!-- <div class="form-group" style="display: flex; ">
                        <label for="blood_group" style="width: 150px; text-align: right;font-weight: bold;">Blood
                          group:&nbsp;&nbsp;&nbsp;</label>
                        <select class="form-control" [(ngModel)]="EmpCardData.blood_group">
                          <option [ngValue]="null">--Select Blood Group--</option>
                          <option *ngFor="let bloodGroup of bloodGroups" [ngValue]="bloodGroup">{{ bloodGroup }}
                          </option>
                        </select>
                      </div>
                      <br> -->
            <!-- <div class="form-group" style="display: flex; " *ngIf="showEmpCardDetails">
                        <label for="doi" style="width: 150px; text-align: right;font-weight: bold;">Emp pass_no:&nbsp;&nbsp;&nbsp;</label>
                        <div>{{EmpCardData.pass_no}}</div>

                      </div><br *ngIf="showEmpCardDetails">
                      <div class="form-group" style="display: flex; " *ngIf="showEmpCardDetails">
                        <label for="doi" style="width: 150px; text-align: right;font-weight: bold;">Date of
                          Issue:&nbsp;&nbsp;&nbsp;</label>
                        <div>{{EmpCardData.doi | date:'dd-MMM-yyyy'}}</div>

                      </div>
                      <br *ngIf="showEmpCardDetails">
                      <div class="form-group" style="display: flex; " *ngIf="showEmpCardDetails">
                        <label for="CardValidUpTo" style="width: 150px; text-align: right;font-weight: bold;">Valid
                          UpTo:&nbsp;&nbsp;&nbsp;</label>
                        <div>{{EmpCardData.CardValidUpTo | date:'dd-MMM-yyyy'}}</div>

                      </div>
                      <br *ngIf="showEmpCardDetails"> -->
            <!-- <div class="form-group" style="display: flex; " >
                        <label for="emp_exp_date" style="width: 150px; text-align: right;font-weight: bold;">New Valid
                          UpTo:&nbsp;&nbsp;&nbsp;</label>
                        <input type="date" id="emp_exp_date" class="form-control "
                          [(ngModel)]="EmpCardData.emp_exp_date" name="emp_exp_date" style="flex-grow: 1;" />
                      </div>
                      <br>-->
            <!-- <div class="form-group" style="display: flex; ">
                        <label for="id_mark" style="width: 150px; text-align: right;font-weight: bold;">ID
                          Mark:&nbsp;&nbsp;&nbsp;</label>
                        <div *ngIf="showEmpCardDetails">{{EmpCardData.id_mark }}</div>
                        <input *ngIf="NewEmpCardForm" type="text" id="id_mark" class="form-control"
                          [(ngModel)]="EmpCardData.id_mark" name="id_mark" style="flex-grow: 1;" />
                      </div>
                      <br> -->
            <!-- <div class="form-group" style="display: flex; ">
                        <label  for="id_mark" style="width: 150px; text-align: right;font-weight: bold;">Remark:&nbsp;&nbsp;&nbsp;</label>
                        <textarea class="form-control" placeholder="remark" aria-label="remark"
                        [(ngModel)]="EmpCardData.remark"></textarea>
                      </div> -->
            <!-- </td> -->


            <!-- <td style="width: 30%; vertical-align: top; text-align: center;">
                      <img [src]="EmpCardData.photo || '/assets/blank_photo.jpg'" width="120px" height="140px"
                        alt="Applicant Photo" />
                      <br />
                      <img [src]="EmpCardData?.sig || '/assets/sig_ldr.gif'" width="150px" height="30px"
                        alt="Upload Signature" />
                    </td> -->
            <!-- </tr> -->



            <!-- <div class="col-md-3">
                      <div class="form-group">
                        <input type="text" class="form-control" id="desg_print" placeholder="Desg. Print"
                          aria-label="desg_print" [(ngModel)]="employee!.desg_print">
                      </div>
                    </div> -->

            <!-- </div> -->

            <!-- </table> -->
            <!-- </div> -->
            <div class="container">


              <div class="row">
                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Name:<span style="color: red;" class="required">*</span></label>
                </div>
                <div class="col">
                  <input *ngIf="NewEmpCardForm" type="text" id="name_print" class="form-control"
                    [(ngModel)]="EmpCardData.name_print" name="name_print" style="flex-grow: 1;"
                    placeholder="Enter your name" />
                  <div *ngIf="showEmpCardDetails">{{EmpCardData.name_print}}</div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">DOB: <span style="color: red;" class="required">*</span></label>
                </div>
                <div class="col-md-3">
                  <div class="form-group row">
                    <div *ngIf="showEmpCardDetails">{{EmpCardData.dob | date:'dd-MMM-yyyy' }}</div>
                    <input type="date" class="form-control" placeholder="Date Of Birth" aria-label="Date Of Birth"
                      [max]="maxDate" *ngIf="NewEmpCardForm" id="dob" class="form-control" [(ngModel)]="EmpCardData.dob"
                      name="dob">
                  </div>
                </div>

                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Body Mark: <span style="color: red;" class="required">*</span></label>
                </div>
                <div class="col">
                  <div *ngIf="showEmpCardDetails">{{EmpCardData.id_mark }}</div>
                  <input placeholder="Body Mark" *ngIf="NewEmpCardForm" type="text" id="id_mark" class="form-control"
                    [(ngModel)]="EmpCardData.id_mark" name="id_mark" style="flex-grow: 1;" />
                </div>
              </div>

              <hr class="row-divider">

              <div class="row" *ngIf="showEmpCardDetails">
                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Emp pass_no:</label>
                </div>
                <div class="col">
                  <div *ngIf="showEmpCardDetails">{{EmpCardData.pass_no}}</div>
                </div>
              </div>

              <div class="row" *ngIf="showEmpCardDetails">
                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Date of
                    Issue: </label>
                </div>
                <div class="col-md-3">
                  <div class="form-group row">
                    <div *ngIf="showEmpCardDetails">{{EmpCardData.doi | date:'dd-MMM-yyyy' }}</div>
                  </div>
                </div>

                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Valid
                    UpTo: </label>
                </div>
                <div class="col">
                  <div>{{EmpCardData.CardValidUpTo | date:'dd-MMM-yyyy'}}</div>
                </div>
              </div>

              <hr class="row-divider" *ngIf="showEmpCardDetails">



              <div class="row" *ngIf="showEmpCardDetails">
                <div class="col-md-3" style="text-align: right"><label class="form-label">Address:</label></div>
                <div class="col">
                  <div>{{EmpCardData.qtr}}</div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-3" style="text-align: right"><label class="form-label">Address:<span
                      style="color: red;" class="required">*</span></label></div>
                <div class="col">
                  <textarea class="form-control" placeholder="Address" aria-label="address"
                    [(ngModel)]="EmpCardData.curr_add"></textarea>
                </div>
              </div>

              <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-3">
                  <div class="form-group">
                    <select class="form-control" [(ngModel)]="EmpCardData!.curr_state"
                      (change)="onStateChange(EmpCardData!.curr_state)">
                      <option value="null">Select State </option>
                      <option [ngValue]="state.id" *ngFor="let state of states">{{state.state_name}}</option>
                    </select>
                  </div>
                </div>

                <div class="col-md-3">
                  <div class="form-group">
                    <select class="form-control" [(ngModel)]="EmpCardData!.curr_district">
                      <option value="null">Select District </option>
                      <option [ngValue]="dist.id" *ngFor="let dist of currDistricts">{{dist.district_name}}
                      </option>
                    </select>
                  </div>
                </div>

                <div class="col-md-3">
                  <div class="form-group">
                    <input type="text" maxlength="6" minlength="6" class="form-control" placeholder="PIN"
                      aria-label="pin" [(ngModel)]="EmpCardData!.curr_pin" pattern="[0-9]*"
                      (input)="onInput($event,'curr_pin')">
                  </div>
                </div>
              </div>

              <hr class="row-divider">

              <div class="row">
                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Mobile number: <span style="color: red;" class="required">*</span></label>
                </div>
                <div class="col">
                  <div *ngIf="showEmpCardDetails">{{EmpCardData.mob_no}}</div>
                  <input *ngIf="NewEmpCardForm" type="text" maxlength="10" minlength="10" class="form-control"
                    id="mobile" name="mobile" [(ngModel)]="EmpCardData.mob_no" placeholder="Enter mobile number"
                    (input)="onInput($event,'mobile')">
                </div>
                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Gender: <span style="color: red;" class="required">*</span></label>
                </div>
                <div class="col-md-3">
                  <div class="form-group row">
                    <select class="form-control" id="gender" [(ngModel)]="EmpCardData.gender">
                      <option value="null">--Select Gender--</option>
                      <option [ngValue]="'M'">Male</option>
                      <option [ngValue]="'F'">Female</option>
                      <option [ngValue]="'O'">Others</option>
                    </select>

                  </div>
                </div>

                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Email: <span style="color: red;" class="required">*</span></label>
                </div>
                <div class="col-md-3">
                  <div class="form-group ">
                    <input *ngIf="NewEmpCardForm" type="email" id="email" class="form-control"
                      [(ngModel)]="EmpCardData.email" name="email" style="flex-grow: 1;" placeholder="Enter email" />
                    <div *ngIf="showEmpCardDetails">{{EmpCardData.email}}</div>
                  </div>
                </div>
                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Blood Group:</label>
                </div>
                <div class="col-md-3">
                  <div class="form-group row">
                    <div *ngIf="EmpCardData.blood_typ_name">{{EmpCardData.blood_typ_name}}</div>
                    <select class="form-control" [(ngModel)]="EmpCardData!.blood_group">
                      <option value="null">--Select Blood Group--</option>
                      <option *ngFor="let bloodGroup of bloodGroups" [ngValue]="bloodGroup">{{ bloodGroup }}
                      </option>
                    </select>
                  </div>
                </div>
              </div>

              <hr class="row-divider">


              <div class="row">
                <div class="col-md-3" style="text-align: right">
                  <label class="form-label">Organization:<span style="color: red;" class="required">*</span></label>
                </div>
                <div class="col">
                  <select *ngIf="NewEmpCardForm" class="form-control" [(ngModel)]="EmpCardData.office_code"
                    (click)="findDesg()">
                    <option [ngValue]="null">Select office</option>
                    <option [ngValue]="office.office_code" *ngFor="let office of offices">{{office.org_desc}}
                    </option>
                  </select>
                  <div *ngIf="showEmpCardDetails">{{EmpCardData.office_name}}</div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-3">
                  <div class="form-group">
                    <select *ngIf="NewEmpCardForm" class="form-control" [(ngModel)]="EmpCardData.designation_code">
                      <option [ngValue]="null">Select designation </option>
                      <option [ngValue]="designation.designation_code" *ngFor="let designation of designations">
                        {{designation.desg_desc}}</option>
                    </select>
                    <div *ngIf="showEmpCardDetails">{{EmpCardData.deg_name}}</div>
                  </div>
                </div>
              </div>
              <hr class="row-divider">
              <div class="row">
                <div class="col-md">
                  <label for="id_proof" class="form-label">Photo <span style="color: red;"
                      class="required">*</span></label><br>
                  <div class="text-center">
                    <span *ngIf="EmpCardData.photo">
                      <img [src]="EmpCardData.photo" alt="Profile Photo" class="rounded-circle"
                        title="Profile Photo" style="width: 150px; height: 128px" />
                    </span>
                    <input type="file" class="custom-file-input" id="profile_photo"
                      (change)="onProfilePhotoSelected($event, 'Profile Photo')" style="display: none">
                    <br /><br />
                    <label for="profile_photo" class="upload-icon-label" title="Upload Profile Photo">
                      <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover"></i>
                    </label>
                  </div>
                </div>
                <!-- <div class="col-md">
                  <label for="id_proof" class="form-label">Signature <span style="color: red;"
                      class="required">*</span></label><br>
                  <div class="text-center">
                    <span *ngIf="EmpCardData.sig">
                      <img [src]="EmpCardData.sig" alt="Signature" class="rounded-square"
                        title="Employee Signature" style="width: 150px; height: 30px" />
                    </span>
                    <input type="file" class="custom-file-input" id="sign_path"
                      (change)="onProfilePhotoSelected($event, 'Employee Sign')" style="display: none">
                    <br /><br />
                    <label for="sign_path" class="upload-icon-label" title="Upload Signature">
                      <i class="bi bi-cloud-arrow-up btn btn-outline-danger enlarge-on-hover"></i>
                    </label>
                  </div>
                </div> -->
                <!-- <div class="col-md" *ngIf="NewEmpCardForm">
                  <label for="id_proof" class="form-label">ID
                    Proof(pdf)</label><br><br>
                  <div class="text-center">
                    <label for="id_proof" class="upload-icon-label"
                      title="Upload Supporting Document with ID Proof">
                      <i class="bi bi-cloud-arrow-up btn btn-outline-warning"></i>
                    </label>
                    <input type="file" class="custom-file-input" (change)="onIDproofSelected($event)" id="id_proof"
                      title="Upload ID Proof" style="display: none">
                    <ng-container *ngIf="EmpCardData!.id_proof">
                      <i class="bi bi-eye btn btn-outline-success enlarge-on-hover"
                        (click)="openPdfInNewTab(EmpCardData!.id_proof)"></i>
                    </ng-container>
                  </div>
                </div>
                <div class="col-md" *ngIf="NewEmpCardForm">
                  <label for="postingOrder" class="form-label">Supporting Document with posting Order(pdf)</label><br><br>
                  <div class="text-center">
                    <label for="postingOrder" class="upload-icon-label"
                      title="Upload Supporting Document with ID Proof">
                      <i class="bi bi-cloud-arrow-up btn btn-outline-warning"></i>
                    </label>
                    <input type="file" class="custom-file-input" (change)="onPostingOrderSelected($event)"
                      id="postingOrder" title="Upload ID Proof" style="display: none">
                    <ng-container *ngIf="EmpCardData!.postingOrder">
                      <i class="bi bi-eye btn btn-outline-success enlarge-on-hover"
                        (click)="openPdfInNewTab(EmpCardData!.postingOrder)"></i>
                    </ng-container>
                  </div>
                </div> -->
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary enlarge-on-hover" (click)="hoverClick($event)"
              (click)="closeEmpPopup()">
              Close
            </button>
            <button type="button" class="btn btn-outline-warning enlarge-on-hover" (click)="hoverClick($event)"
              (click)="NewEmpCard()" *ngIf="showEmpCardDetails">
              New Form
            </button>
            <button type="button" class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"
              (click)="PullEbaCard()" *ngIf="showEmpCardDetails">
              PULL
            </button>
            <button type="button" class="btn btn-outline-warning enlarge-on-hover" (click)="hoverClick($event)"
              (click)="FetchEmpCard()" *ngIf="NewEmpCardForm">
              Fetch Card
            </button>
            <button type="button" class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"
              (click)="SubmitForm()" *ngIf="NewEmpCardForm">
              Submit Form
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-container>
    <div class="modal modal-above-header" tabindex="-1" data-bs-backdrop="false" [ngStyle]="{'display': displayEba }"
      style="backdrop-filter: blur(3px);background-color: rgba(128, 128, 128, 0.7); overflow-y: auto;">
      <div class="modal-dialog modal-dialog-centered modal-m" *ngIf="!showquarterDetails">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <b> Pull Quarter Details </b>
            </h5>
          </div>

          <div class="modal-body">
            <div class="row">
              <div class="col-md-4" style="margin-left: 1%;">
                <label class="form-label">Location:</label>
              </div>
              <div class="col-md-8" style="margin-left: -7%">
                <select class="form-control" [(ngModel)]="employee!.location_id" (change)="qtrtype()">
                  <option value="">--Select--</option>
                  <option [ngValue]="locationtype.location_code" *ngFor="let locationtype of locationtypelist">
                    {{locationtype!.location_name}}</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4" style="margin-left: 1%">
                <label class="form-label">Quarter Type:</label>
              </div>
              <div class="col-md-8" style="margin-left: -7%">
                <select class="form-control" [(ngModel)]="employee!.qtr_code" (change)="qtraddress($event)">
                  <option value="">--Select--</option>
                  <option [ngValue]="quartertype.type_code" *ngFor="let quartertype of quarterstypelist">
                    {{quartertype!.type_name}}</option>
                </select>
              </div>
            </div>
            <div class="row" *ngIf="blockstypelist !== null && blockstypelist.length > 0" (change)="qtrBlckaddress()">
              <div class="col-md-4" style="margin-left: 1%">
                <label class="form-label">Block:</label>
              </div>
              <div class="col-md-8" style="margin-left: -7%">
                <select class="form-control" [(ngModel)]="employee!.blck">
                  <option [ngValue]="blck.code" *ngFor="let blck of blockstypelist">
                    {{blck!.type_name}}</option>
                </select>
              </div>
            </div>
            <div class="row" *ngIf="quarterList !== null && quarterList.length > 0">
              <div class="col-md-4" style="margin-left: 1%">
                <label class="form-label">Quarter address:</label>
              </div>
              <div class="col-md-8" style="margin-left: -7%">
                <select class="form-control" [(ngModel)]="employee!.qtr">
                  <option value="">--Select--</option>
                  <option [ngValue]="qtr" *ngFor="let qtr of quarterList">
                    {{qtr!.qtr_no}}</option>
                </select>
              </div>
            </div>

          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary enlarge-on-hover" (click)="hoverClick($event)"
              (click)="closeEbaPopup()">
              Close
            </button>

            <button type="button" class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"
              (click)="fetch()" *ngIf="employee!.qtr">
              Fetch
            </button>
          </div>
        </div>
      </div>

      <div class="modal-dialog modal-dialog-centered modal-xl" *ngIf="showquarterDetails">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <b>EBA details</b>
            </h5>
          </div>

          <div class="modal-body">
            <div class="row">
              <div class="row">
                <div class="col-md-2"><b>Name:</b></div>
                <div class="col-md-10" style="font-size: 120%;margin-left: -6%;">
                  {{quarterDetails?.m_Item1?.[0]?.Name}}
                </div>
              </div>

              <div class="row">
                <div class="col-md-2"><b>Designation:</b></div>
                <div class="col-md-10" style="margin-left: -6%;">
                  {{quarterDetails?.m_Item1?.[0]?.Designation}}
                </div>
              </div>

              <div class="row">
                <div class="col-md-2"><b>Section:</b></div>
                <div class="col-md-10" style="margin-left: -6%;">
                  {{quarterDetails?.m_Item1?.[0]?.Section}}
                </div>
              </div>

              <div class="row">
                <div class="col-md-2"><b>Address:</b></div>
                <div class="col-md-10" style="margin-left: -6%;">
                  {{quarterDetails?.m_Item1?.[0]?.Address}}
                </div>
              </div>
            </div>
            <br>
            <div class="row" style="overflow-x: auto;overflow-y: hidden; white-space: nowrap;">
              <tr>
                <ng-container *ngIf="quarterDetails?.m_Item1?.[0]?.Members">
                  <ng-container *ngFor="let member of quarterDetails?.m_Item1?.[0]?.Members; let i = index">
                    <td>
                      <div class="d-flex flex-column align-items-center"
                        style="width:100%; text-align: center; padding-top: 10px;">
                        <span *ngIf="member?.PhotoUrl">
                          <img [src]="member.PhotoUrl" alt="Profile Photo" style="width: 150px; height: 128px"
                            class="rounded-circle" title="Profile Photo" />
                        </span>
                        <span *ngIf="member" style="font-size: 1.2em">{{ member.MemberName }}</span>
                        <span *ngIf="member?.PassNo">{{ member.PassNo }}</span>
                      </div>
                    </td>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="quarterDetails?.m_Item2?.length>0">
                  <ng-container *ngFor="let item of quarterDetails?.m_Item2; let j = index">
                    <ng-container *ngFor="let itemMember of item?.Members; let k = index">
                      <td *ngIf="itemMember?.Relation == 12">
                        <div class="d-flex flex-column align-items-center"
                          style="width:100%; text-align: center; padding-top: 10px;">
                          <span *ngIf="itemMember?.PhotoUrl">
                            <img [src]="itemMember.PhotoUrl" alt="Profile Photo" style="width: 150px; height: 128px"
                              class="rounded-circle" title="Profile Photo" />
                          </span>
                          <span *ngIf="itemMember" style="font-size: 1.2em">{{ itemMember.Name }}</span>
                          <span *ngIf="itemMember?.PassNo">{{ itemMember.PassNo }}</span>
                        </div>
                      </td>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </tr>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary enlarge-on-hover" (click)="hoverClick($event)"
              (click)="closeEbaPopup()">
              Close
            </button>
            <button type="button" class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"
              (click)="PullEba()">
              Show Form
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</td>


<div class="modal modal-above-header" tabindex="-1" data-bs-backdrop="false" [ngStyle]="{'display': searchbox }"
  style="backdrop-filter: blur(3px);background-color: rgba(128, 128, 128, 0.7); overflow-y: auto; ">
  <div class="modal-dialog modal-dialog-centered modal-l">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row">
          <label class="form-label">Role</label>
          <select class="form-control" [(ngModel)]="search!.role">
            <option value="null">-Select-</option>
            <option [ngValue]=4>Dh</option>
            <option [ngValue]=5>So</option>
            <option [ngValue]=6>US</option>
            <option [ngValue]=9>Director</option>
            <option [ngValue]=10>Asp</option>
            <option [ngValue]=7>Approved</option>
            <option [ngValue]=8>Returned</option>
          </select>
        </div><br>
        <div class="row">
          <label class="form-label">Name</label>
          <input type="text" class="form-control" placeholder="Search by Name" aria-label="Name"
            [(ngModel)]="search!.applicant_name">
        </div><br>
        <div class="row">
          <label class="form-label">Reg no</label>
          <input type="text" class="form-control" placeholder="Search by Reg no" aria-label="Name"
            [(ngModel)]="search!.reg_no">
        </div><br>
        <div class="row">
          <div class="col-6">
            <label class="form-label">From Date</label>
            <input type="date" class="form-control" aria-label="Name" [(ngModel)]="search!.app_date_from">
          </div>
          <div class="col-6">
            <label class="form-label">To Date</label>
            <input type="date" class="form-control" aria-label="Name" [(ngModel)]="search!.app_date_to">
          </div>
        </div>
      </div>
      <div class="modal-footer">

        <button type="button" class="btn btn-outline-secondary enlarge-on-hover"
          (click)="hoverClick($event);closesearch()">
          Close
        </button>

        <button type="button" class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event);Search()">
          Search
        </button>
      </div>
    </div>
  </div>
</div>
