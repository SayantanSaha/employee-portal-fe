<div [class.container]="editable && !urlid" [class.container-fluid]="!editable && urlid" [style.padding]="!editable && urlid ? '2%' : null"
     [style.margin-top]="!editable && urlid ? '-3%' : null">
<!--  <div  style="padding: 2%;margin-top: -3%">-->
<div class="row">
  <div  [class.col-md-10]="urlid">
<!--    <div  style="width: 100%">-->
      <div class="row">
        <div class="col-md-9" >
          <div style="font-size: 200%; color: deeppink">
          EBA Application
        </div>
          <div *ngIf="editable && !urlid">
            <label>
              <input type="radio" name="relationType" [value]="'relative'" [checked]="getInitialRadioValue('relative')" (change)="onSelect('relative')">
              Relative
            </label>

            <label style="padding-left: 1%">
              <input type="radio" name="relationType" [value]="'domestichelp'" [checked]="getInitialRadioValue('domestichelp')" (change)="onSelect('domestichelp')">
              Domestic Help
            </label>
          </div>


        </div>

        <div class="col-md-2" style="font-size: 200%; color: deeppink" *ngIf="!urlid">
          <button class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" [routerLink]="'/profile/edit'">
            + add Relative/DomesticHelp
          </button>
        </div>
      </div>
      <!--    <div class="row"  *ngIf="editable && employee && employee.eba_applications != null && employee.eba_applications.length > 0">-->
      <!--      <div  *ngFor="let application of employee!.eba_applications; let j = index">-->
      <!--        <div *ngFor="let role of application.roles; let i = index">-->
      <!--          <div class="col" style="color: red" >-->
      <!--            Your application is pending with {{role.role_desc}}.-->
      <!--          </div>-->
      <!--        </div>-->
      <!--      </div>-->
      <!--    </div>-->

      <div class="card shadow" >
        <div class="card-body">
          <div class="row">
            <div class="col col-md-6">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title" style=" color: #1d00ff"> Officer Details</h5>
                  <hr class="row-divider">
                  <table>
                    <tr>
                      <td ><b>Name:</b></td>
                      <td style="font-size: 120%" >{{employee!.emp_title}} {{employee!.emp_name}}</td>
                    </tr>
                    <tr>
                      <td style="width: 30%;"><b>Date of Birth:</b></td>
                      <td >{{employee!.dob | date:'dd-MM-yyyy'}}</td>
                    </tr>
                    <tr>
                      <td ><b> Mobile no:</b></td>
                      <td >{{employee!.mobile}}</td>
                    </tr>
                    <tr>
                      <td ><b> Email:</b></td>
                      <td >{{employee!.email_id}}</td>
                    </tr>
                    <tr>
                      <td ><b>Address:</b></td>
                      <td >{{employee!.curr_add}},<br />
                        {{employee!.curr_district!.district_name}}
                        {{employee!.curr_state!.state_name}} - {{employee!.curr_pin}}</td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
            <div class="col col-md-6">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title" style=" color: #1d00ff">Gov Details</h5>
                  <hr class="row-divider">
                  <table>
                    <tr>
                      <td ><b>Designation:</b></td>
                      <td style="font-size: 120%" *ngIf="employee && employee.designations">
                        {{ getActiveDesignations(employee.designations) }}
                      </td>
                    </tr>
                    <tr>
                      <td style="width: 58%;"><b>Department:</b></td>
                      <td *ngIf="employee && employee.divisions">{{ getActiveDivision(employee.divisions)}}</td>
                    </tr>
                    <tr>
                      <td ><b>Posting place:</b></td>
                      <td >{{employee!.organization!.org_desc}}</td>
                    </tr>
                    <tr>
                      <td><b>posting date:</b></td>
                      <td>{{employee!.doj_gs | date:'dd-MM-yyyy'}}</td>
                    </tr>
                    <tr>
                      <td ><b>Retirement dt:</b></td>
                      <td > {{employee!.dor | date:'dd-MM-yyyy'}}</td>
                    </tr>
                    <tr>
                      <td><b>Id Card NO:</b></td>
                      <td *ngIf="employee && employee.id_cards">{{ getActiveIdCard(employee.id_cards) }}</td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>

      <div *ngIf="applyingforRelative || urlid">
        <div class="card shadow" *ngIf="employee && employee.relations && employee.relations.length > 0">
          <div class="card-body">
            <h5 class="card-title" style=" color: indianred"> Officer's Family Details</h5>
            <hr class="row-divider">
            <div class="row">
              <div class="col-md">
                <div class="card table-responsive">
                  <div class="card-body">
                    <table class="table table-stripped">
                      <thead>
                      <tr>
                        <th>Select</th>
<!--                        <th *ngIf="!urlid && editable">-->
<!--                          &nbsp;-->
<!--                        </th>-->
<!--                        <th>Sl No.</th>-->
                        <th>Name</th>
                        <th>Relation</th>
                        <th>Mob No.</th>
                        <th>DOB</th>
                        <th>EBA NO</th>
                        <th *ngIf="!urlid && editable">Valid upto</th>
                        <th >Photo</th>
                        <th >Sign.</th>
                        <th >Id Proof</th>
                        <th *ngIf="urlid && !editable">Valid upto</th>
                        <th *ngIf="urlid && !editable">Remark</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let member of employee!.relations; let i = index">
                        <ng-container *ngIf="member.pivot.eba_passes && member.pivot.eba_passes.length > 0">
                          <ng-container *ngFor="let eba_pass of member.pivot.eba_passes; let j = index">
                            <ng-container *ngIf="urlid && !editable">
                              <td>
                                <ng-container *ngIf="(user && user.role)" >
                                  <ng-container *ngFor="let role of user.role">
                                    <ng-container *ngIf="role.role_id === 4">
                                      <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked" data-toggle="toggle" [(ngModel)]="member.allSelected">
                                      </div>
                                    </ng-container>
                                    <ng-container *ngIf="role.role_id === 5 || role.role_id === 6">
                                      <div style="color: blue;" *ngIf="member.allSelected">
                                        Recommended
                                      </div>
                                      <div style="color: red;" *ngIf="!member.allSelected">
                                        Denied
                                      </div>
                                    </ng-container >
                                  </ng-container>
                                </ng-container>
                              </td>
                            </ng-container>
                            <ng-container *ngIf="editable && !urlid">
                              <td>
<!--                                <ng-container *ngIf="(eba_pass.eba_pass_no === null || isWithinTwoWeeks(eba_pass.eba_pass_exp_date))">-->
                                  <input type="checkbox" class="selectItem" [(ngModel)]="member.allSelected" >
<!--                                </ng-container>-->
                              </td>
                            </ng-container>
<!--                            <td>{{ i + 1 }}</td>-->
                            <td>
                              <span>{{ member!.pivot!.rel_name }}</span>
                            </td>
                            <td>
                              <span>{{ member!.rel_desc }}</span>
                            </td>
                            <td>
                              <span>{{ member!.pivot!.rel_mobile_no }}</span>
                            </td>
                            <td>
                              <span>{{ member!.pivot!.rel_dob | date:'dd-MM-yyyy'}}</span>
                            </td>
                            <ng-container *ngIf="eba_pass">
                              <td>
<!--                                <ng-container *ngIf="editable && !urlid">-->
<!--                                  <ng-container *ngIf=" eba_pass.eba_pass_no !== null; else eba_pass_no_template">-->
<!--                                    {{ eba_pass.eba_pass_no }}-->
<!--                                  </ng-container>-->
<!--                                  <ng-template #eba_pass_no_template>-->
<!--                                    <div style="color: blue;" *ngIf="eba_pass?.eba_pass_no === null ">-->
<!--                                      new-->
<!--                                    </div>-->
<!--                                  </ng-template>-->
<!--                                </ng-container>-->
<!--                                <div *ngIf="urlid && !editable">-->
                                <div>
                                  <div *ngIf="eba_pass?.eba_pass_no !== null ">
                                    {{ eba_pass.eba_pass_no }}
                                  </div>
                                  <div style="color: blue;" *ngIf="eba_pass?.eba_pass_no === null ">
                                    new
                                  </div>
                                </div>
                              </td>
                              <td *ngIf="!urlid && editable">
                                <span >{{ eba_pass.eba_pass_exp_date | date:'dd-MM-yyyy'}}</span>
                              </td>
                              <td  >
                                <div   *ngIf="eba_pass.photo_path && eba_pass.photo_path!==null">
                                  <ng-container *ngIf="eba_pass.photo_path.startsWith('http')">
                                    <!-- Render image if photo_path starts with 'http' -->
                                    <img [src]="eba_pass.photo_path" style="width: 150px; height: 128px" class="rounded-square" />
                                  </ng-container>
                                  <ng-container *ngIf="!eba_pass.photo_path.startsWith('http')">
                                    <!-- Render button/link if photo_path does not start with 'http' -->
                                    <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="photo" (click)="openFileInNewPage(i,j,'photo')">
                                      <i class="bi bi-eye"></i>
                                    </a>
                                  </ng-container>
<!--                                  <img [src]="eba_pass?.photo_path" style="width: 150px; height: 128px" class="rounded-square"/>-->

<!--                                  <a  class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="id proof" (click)="openFileInNewPage(i,j,'photo')" >-->
<!--                                    <i class="bi bi-eye"></i>-->
<!--                                  </a>-->
                                </div>
                              </td>
                              <td  >
                                <div   *ngIf="eba_pass.sign_path && eba_pass.sign_path!==null">
                                <ng-container *ngIf="eba_pass.sign_path.startsWith('http')">
                                  <!-- Render image if photo_path starts with 'http' -->
                                  <img [src]="eba_pass.sign_path" style="width: 150px; height: 128px" class="rounded-square" />
                                </ng-container>
                                <ng-container *ngIf="!eba_pass.sign_path.startsWith('http')">
                                  <!-- Render button/link if photo_path does not start with 'http' -->
                                  <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="sign" (click)="openFileInNewPage(i,j,'sign')">
                                    <i class="bi bi-eye"></i>
                                  </a>
                                </ng-container>
                                </div>
<!--                                <div class="col-md-6" style="text-align: right" *ngIf="eba_pass.sign_path && eba_pass.sign_path!==null">-->
<!--                                  <img [src]="eba_pass?.sign_path" style="width: 150px; height: 128px" class="rounded-square"/>-->

<!--                                  <a  class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="id proof" (click)="openFileInNewPage(i,j,'sign')" >-->
<!--                                    <i class="bi bi-eye"></i>-->
<!--                                  </a>-->
<!--                                </div>-->
                              </td>
                              <td  >
                                <ng-container *ngIf="eba_pass.id_proof_path && eba_pass.id_proof_path !==null && eba_pass?.id_proof_path?.startsWith('http')">
                                  <!-- Render image if photo_path starts with 'http' -->
                                  <img [src]="eba_pass.id_proof_path" style="width: 150px; height: 128px" class="rounded-square" />
                                </ng-container>
                                <ng-container *ngIf="eba_pass.id_proof_path && eba_pass.id_proof_path !==null && !eba_pass?.id_proof_path?.startsWith('http')">
                                  <!-- Render button/link if photo_path does not start with 'http' -->
                                  <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="id proof" (click)="openFileInNewPage(i,j,'id')">
                                    <i class="bi bi-eye"></i>
                                  </a>
                                </ng-container>
<!--                                <div class="col-md-6" style="text-align: right" *ngIf="eba_pass.id_proof_path && eba_pass.id_proof_path !==null">-->
<!--                                  <img [src]="eba_pass?.id_proof_path" style="width: 150px; height: 128px" class="rounded-square"/>-->

<!--                                  <a  class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="id proof" (click)="openFileInNewPage(i,j,'id')" >-->
<!--                                    <i class="bi bi-eye"></i>-->
<!--                                  </a>-->
<!--                                </div>-->
                              </td>

                              <ng-container *ngIf="urlid && !editable">
                                <ng-container *ngIf="(user && user.role)" >
                                  <ng-container *ngFor="let role of user.role">
                                    <ng-container *ngIf="role.role_id === 4">
                                      <td>
                                        <input type="date" class="form-control" [(ngModel)]="eba_pass.eba_pass_exp_date" [min]="minDate"
                                               [value]="getDefaultExpDate(i,j,0,'relative')">
                                      </td>
                                      <td>
                                        <textarea  class="form-control" [(ngModel)]="eba_pass.remark"></textarea>
                                      </td>
                                    </ng-container>
                                    <ng-container *ngIf="role.role_id === 5 || role.role_id === 6">
                                      <td>
                                        <div *ngIf="eba_pass.eba_pass_exp_date">
                                          {{eba_pass.eba_pass_exp_date | date:'dd-MM-yyyy'}}
                                        </div>
                                      </td>
                                      <td>
                                        <div *ngIf="eba_pass.remark">
                                          {{eba_pass.remark}}
                                        </div>
                                      </td>
                                    </ng-container >
                                  </ng-container>
                                </ng-container>
                              </ng-container>
                            </ng-container>
                          </ng-container>
                        </ng-container>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="card shadow" *ngIf="employee && employee.vehicles && employee.vehicles.length > 0">
          <div class="card-body">
            <h5 class="card-title" style=" color: saddlebrown">Officer's Vehicle Details</h5>
            <hr class="row-divider">
            <div class="row">
              <div class="col-md">
                <div class="card table-responsive">
                  <div class="card-body">
                    <table class="table table-stripped">
                      <thead>
                      <tr>
                        <!--                        <div *ngIf="urlid">-->
                        <!--                          <div *ngIf="(user && user.role)" >-->
                        <!--                            <div *ngFor="let role of user.role">-->
                        <!--                              <div *ngIf="role.role_id === 4">-->
                        <!--                                <th>-->
                        <!--                                  &nbsp;-->
                        <!--                                </th>-->
                        <!--                              </div>-->
                        <!--                            </div>-->
                        <!--                          </div>-->
                        <!--                        </div>-->
                        <!--                        <div *ngIf="editable">-->
                        <!--                          <th>-->
                        <!--                            &nbsp;-->
                        <!--                          </th>-->
                        <!--                        </div>-->
                        <th>Sl No.</th>
                        <th>Vehicle Desc</th>
                        <th>Vehicle No.</th>
                        <th>Chassis No.</th>
                        <th>Registered owner</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let vehicle of employee!.vehicles; let i = index">
                        <!--                        <div *ngIf="urlid">-->
                        <!--                          <div *ngIf="(user && user.role)" >-->
                        <!--                            <div *ngFor="let role of user.role">-->
                        <!--                              <div *ngIf="role.role_id === 4">-->
                        <!--                                <td>-->
                        <!--                                  <input type="checkbox" class="selectItem" [(ngModel)]="vehicle.allSelected" >-->
                        <!--                                </td>-->
                        <!--                              </div>-->
                        <!--                            </div>-->
                        <!--                          </div>-->
                        <!--                        </div>-->
                        <!--                        <div *ngIf="editable">-->
                        <!--                          <td>-->
                        <!--                            <input type="checkbox" class="selectItem" [(ngModel)]="vehicle.allSelected" >-->
                        <!--                          </td>-->
                        <!--                        </div>-->
                        <td>{{ i + 1 }}</td>
                        <td>
                          <span >{{vehicle!.model_name}}</span>
                        </td>
                        <td>
                          <span >{{vehicle!.vehicle_no}}</span>
                        </td>
                        <td>
                          <span >{{vehicle!.chassis_no}}</span>
                        </td>
                        <td>
                          <span >{{vehicle!.vehicle_owner}}</span>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <br *ngIf="applyingforRelative">
      </div>

      <div *ngIf="!applyingforRelative || urlid">
        <div *ngIf="employee && employee.servants && employee.servants.length > 0">
          <div *ngFor="let servant of employee!.servants; let i = index">
            <div class="card shadow" >
              <div class="card-body">
                <ng-container *ngIf="servant.eba_passes != null && servant.eba_passes.length > 0">
                  <ng-container *ngFor="let servant_detail of servant.eba_passes; let k = index">
                    <div class="row" *ngIf="urlid && !editable">
                      <ng-container *ngIf="(user && user.role)" >
                        <ng-container *ngFor="let role of user.role">
                          <ng-container *ngIf="role.role_id === 4">
                            <div class="col-md-6 d-flex align-items-center">
                              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheck" data-toggle="toggle" [(ngModel)]="servant.allSelected">
                              <h5 class="card-title" style="color: saddlebrown; margin-left: 10px;">Domestic help Details</h5>
                            </div>
                            <div class="col-md-6">
                              <textarea class="form-control"  [(ngModel)]="servant_detail.remark" placeholder="remark"></textarea>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="role.role_id === 5 || role.role_id === 6">
                            <div class="col-md-6 d-flex align-items-center">
                              <div style="color: blue;" *ngIf="servant.allSelected">
                                Recommended
                              </div>
                              <div style="color: red;" *ngIf="!servant.allSelected">
                                Not Recommended
                              </div>
                              <h5 class="card-title" style="color: saddlebrown; margin-left: 10px;">Domestic help Details</h5>
                            </div>
                            <div class="col-md-6">
                              {{servant_detail.remark}}
                            </div>
                          </ng-container>
                        </ng-container>
                      </ng-container>
                    </div>
                    <div class="row" *ngIf="editable && !urlid">
                      <div class="col-md-6 d-flex align-items-center">
                        <input type="checkbox" class="selectItem" [(ngModel)]="servant.allSelected">
                        <h5 class="card-title" style="color: saddlebrown; margin-left: 10px;">Domestic help Details</h5>
                      </div>
                    </div>
                    <hr class="row-divider">
                    <div class="row">
                      <tr>
                        <div class="card">
                          <div class="card-body">
                            <div class="row">
                              <div class="col-md-6">
                                <label class="form-label">Name:</label>
                                <div class="input-group mb-3">
                                  {{servant!.servant_name}}
                                </div>
<!--                              </div>-->
<!--                              <div class="col-md-6">-->
                                <label class="form-label">Mobile No:</label>
                                <div class="input-group mb-3">
                                  {{servant!.servant_mobile_no}}
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="row">
                                <td class="col-md-4"*ngIf="servant_detail.photo_path && servant_detail.photo_path!==null">
<!--                                  <ng-container *ngIf="servant_detail.photo_path.startsWith('http')">-->
                                    <!-- Render image if photo_path starts with 'http' -->
                                    <img [src]="servant_detail.photo_path" style="width: 150px; height: 128px" class="rounded-square" />
<!--                                  </ng-container>-->
<!--                                  <ng-container *ngIf="!servant_detail.photo_path.startsWith('http')">-->
<!--                                    &lt;!&ndash; Render button/link if photo_path does not start with 'http' &ndash;&gt;-->
<!--                                    <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="sign" (click)="openFileInNewPage(i,k,'photo')">-->
<!--                                      <i class="bi bi-eye"></i>-->
<!--                                    </a>-->
<!--                                  </ng-container>-->
                                </td>
                                <td class="col-md-4"  *ngIf="servant_detail.sign_path && servant_detail.sign_path!==null">
<!--                                  <ng-container *ngIf="servant_detail.sign_path.startsWith('http')">-->
                                    <!-- Render image if photo_path starts with 'http' -->
                                    <img [src]="servant_detail.sign_path" style="width: 150px; height: 128px" class="rounded-square" />
<!--                                  </ng-container>-->
<!--                                  <ng-container *ngIf="!servant_detail.sign_path.startsWith('http')">-->
<!--                                    &lt;!&ndash; Render button/link if photo_path does not start with 'http' &ndash;&gt;-->
<!--                                    <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="sign" (click)="openFileInNewPage(i,k,'sign')">-->
<!--                                      <i class="bi bi-eye"></i>-->
<!--                                    </a>-->
<!--                                  </ng-container>-->
                                </td>
                                <td class="col-md-4" *ngIf="servant_detail.id_proof_path && servant_detail.id_proof_path!==null">
<!--                                  <ng-container *ngIf="servant_detail.id_proof_path.startsWith('http')">-->
                                    <!-- Render image if photo_path starts with 'http' -->
                                    <img [src]="servant_detail.id_proof_path" style="width: 150px; height: 128px" class="rounded-square" />
<!--                                  </ng-container>-->
<!--                                  <ng-container *ngIf="!servant_detail.id_proof_path.startsWith('http')">-->
                                    <!-- Render button/link if photo_path does not start with 'http' -->
<!--                                    <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="sign" (click)="openFileInNewPage(i,k,'id')">-->
<!--                                      <i class="bi bi-eye"></i>-->
<!--                                    </a>-->
<!--                                  </ng-container>-->
                                </td>
                                </div>
                              </div>
                            </div>
                            <div *ngIf="servant_detail">

                                <div class="row">
                                  <div class="col-md-6">
                                    <label class="form-label">EBA Pass No</label>
                                    <br>
                                    <div *ngIf="servant_detail.eba_pass_no !== null">
                                      {{ servant_detail.eba_pass_no }}
                                    </div>
                                    <div style="color:blue;" *ngIf="servant_detail.eba_pass_no === null ">
                                      new
                                    </div>
                                  </div>
                                  <div class="col-md-6">
                                    <label class="form-label">Valid Upto</label>
                                    <br>
                                    <div *ngIf="servant_detail.eba_pass_exp_date !== null && editable && !urlid">
                                      {{ servant_detail.eba_pass_exp_date | date:'dd-MM-yyyy'}}
                                    </div>
                                    <ng-container *ngIf="(user && user.role) && !editable && urlid" >
                                      <ng-container *ngFor="let role of user.role">
                                        <ng-container *ngIf="role.role_id === 4">
                                          <td>
                                            <input type="date" class="form-control" [(ngModel)]="servant_detail.eba_pass_exp_date" [min]="minDate"
                                                   [value]="getDefaultExpDate(i,k,0,'servant')">
                                          </td>
                                        </ng-container>
                                        <ng-container *ngIf="role.role_id === 5 || role.role_id === 6">
                                          <td>
                                            <div *ngIf="servant_detail.eba_pass_exp_date">
                                              {{servant_detail.eba_pass_exp_date | date:'dd-MM-yyyy'}}
                                            </div>
                                          </td>
                                        </ng-container>
                                      </ng-container>
                                    </ng-container>
                                  </div>
                                </div>
                                <br>
                              <div *ngIf="editable && !urlid">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label class="form-label">Present Address (outhouse no)</label>
                                    <br>
                                    {{servant!.out_house_address}}
                                  </div>
                                  <div class="col-md-6">
                                    <label class="form-label">living since at president sect.</label>
                                    <input type="date" class="form-control" [(ngModel)]="servant_detail.living_at_president_sect">
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-6">
                                    <label class="form-label">Perm. Address</label>
                                    <textarea class="form-control" [(ngModel)]="servant_detail.perm_address"></textarea>
                                  </div>
                                  <div class="col-md-6">
                                    <label class="form-label">Address where Resided during last 5yr</label>
                                    <textarea class="form-control" [(ngModel)]="servant_detail.last_5yr_address" ></textarea>
                                  </div>
                                </div>
                                <hr class="row-divider">
                                <div class="row">
                                  <label class="form-label">2 References from permanent address</label>
                                  <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                      <th scope="col">Sl No</th>
                                      <th scope="col">Name</th>
                                      <th scope="col">Phone No</th>
                                      <th scope="col">Address</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                      <th scope="row">1</th>
                                      <td><input type="text" class="form-control"  [(ngModel)]="servant_detail.reference_1_name"></td>
                                      <td><input type="text" class="form-control" maxlength="10" minlength="10"
                                                 [(ngModel)]="servant_detail.reference_1_phone_no" (input)="onMobileNoInput($event, i, k)" (blur)="onMobileBlur($event, i, k)"/>
                                      </td>
                                      <td><textarea class="form-control" [(ngModel)]="servant_detail.reference_1_address"></textarea></td>
                                    </tr>
                                    <tr>
                                      <th scope="row">2</th>
                                      <td><input type="text" class="form-control"  [(ngModel)]="servant_detail.reference_2_name"></td>
                                      <td><input type="text" class="form-control"  [(ngModel)]="servant_detail.reference_2_phone_no" maxlength="10"
                                                 minlength="10"  (input)="onMobileNo($event, i, k)" (blur)="onMobileNoBlur($event, i, k)">
                                      </td>
                                      <td><textarea class="form-control" [(ngModel)]="servant_detail.reference_2_address"></textarea></td>
                                    </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                              <div *ngIf="urlid && !editable">
                                <div class="row">
                                  <div class="col-md-6">
                                    <label class="form-label">Present Address (outhouse no)</label><br>
                                    {{servant.out_house_address ? servant.out_house_address : 'n/a'}}
                                  </div>
                                  <div class="col-md-6">
                                    <label class="form-label">living since at president sect.</label><br>
                                    {{ servant_detail.living_at_president_sect ? servant_detail.living_at_president_sect : 'n/a' }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-6">
                                    <label class="form-label">Perm. Address</label><br>
                                    {{servant_detail.perm_address ? servant_detail.perm_address: 'n/a'}}
                                  </div>

                                  <div class="col-md-6">
                                    <label class="form-label">Address where Resided during last 5yr</label><br>
                                    {{servant_detail.last_5yr_address ? servant_detail.last_5yr_address: 'n/a'}}
                                  </div>
                                </div>
                                <hr class="row-divider">
                                <div class="row">
                                  <label class="form-label">2 References from permanent address</label>
                                  <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                      <th scope="col">Sl No</th>
                                      <th scope="col">Name</th>
                                      <th scope="col">Phone No</th>
                                      <th scope="col">Address</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                      <th scope="row">1</th>
                                      <td>{{ servant_detail.reference_1_name?servant_detail.reference_1_name: 'n/a'}}</td>
                                      <td>{{servant_detail.reference_1_phone_no?servant_detail.reference_1_phone_no: 'n/a'}}</td>
                                      <td>{{servant_detail.reference_1_address?servant_detail.reference_1_address: 'n/a'}}</td>
                                    </tr>
                                    <tr>
                                      <th scope="row">2</th>
                                      <td>{{servant_detail.reference_2_name?servant_detail.reference_2_name: 'n/a'}}</td>
                                      <td>{{servant_detail.reference_2_phone_no?servant_detail.reference_2_phone_no: 'n/a'}}</td>
                                      <td>{{servant_detail.reference_2_address?servant_detail.reference_2_address: 'n/a'}}</td>
                                    </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </tr>
                    </div>
                    <br>
                  </ng-container>
                </ng-container>
                <div *ngIf="servant && servant.relations && servant.relations.length > 0">
                  <h5 class="card-title" style=" color: indianred"> Domestic help's Family Details</h5>
                  <hr class="row-divider">
                  <div class="row">
                    <div class="col-md">
                      <div class="card table-responsive">
                        <div class="card-body">
                          <table class="table table-stripped">
                            <thead>
                            <tr>
                              <th>Select</th>
                              <th>Name</th>
                              <th>Relation</th>
                              <th>Mob No.</th>
                              <th>DOB</th>
                              <th>EBA NO</th>
                              <th *ngIf="!urlid && editable">Valid upto</th>
                              <th >Photo</th>
                              <th >Sign.</th>
                              <th >Id Proof</th>
                              <th *ngIf="urlid && !editable">Valid upto</th>
                              <th *ngIf="urlid && !editable">Remark</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let member of servant!.relations; let k = index">
                              <ng-container *ngIf="member.pivot.eba_passes && member.pivot.eba_passes.length > 0">
                                <ng-container *ngFor="let eba_pass of member.pivot.eba_passes; let j = index">
                                  <ng-container *ngIf="urlid && !editable">
                                    <td>
                                      <ng-container *ngIf="(user && user.role)" >
                                        <ng-container *ngFor="let role of user.role">
                                          <ng-container *ngIf="role.role_id === 4">
                                            <div class="form-check form-switch">
                                              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitch" data-toggle="toggle" [(ngModel)]="member.allSelected">
                                            </div>
                                          </ng-container>
                                          <ng-container *ngIf="role.role_id === 5 || role.role_id === 6">
                                            <div style="color: blue;" *ngIf="member.allSelected">
                                              Recommended
                                            </div>
                                            <div style="color: red;" *ngIf="!member.allSelected">
                                              Denied
                                            </div>
                                          </ng-container >
                                        </ng-container>
                                      </ng-container>
                                    </td>
                                  </ng-container>
                                  <ng-container *ngIf="editable && !urlid">
                                    <td>
                                      <!--                                <ng-container *ngIf="(eba_pass.eba_pass_no === null || isWithinTwoWeeks(eba_pass.eba_pass_exp_date))">-->
<!--                                      <input type="checkbox" class="selectItem" [(ngModel)]="member.allSelected" (change)="updateRelationSelection(servant, member)">-->
                                      <input type="checkbox" class="selectItem" [(ngModel)]="member.allSelected"  (change)="updateRelationSelection(servant, member)">
                                      <!--                                </ng-container>-->
                                    </td>
                                  </ng-container>
<!--                                  <div *ngIf="urlid && !editable">-->
<!--                                    <div *ngIf="(user && user.role)" >-->
<!--                                      <div *ngFor="let role of user.role">-->
<!--                                        <div *ngIf="role.role_id === 4">-->
<!--                                          <td>-->
<!--                                            <div *ngIf="(eba_pass.eba_pass_no === null || eba_pass.eba_pass_exp_date === null)">-->
<!--                                              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitch" data-toggle="toggle" [(ngModel)]="member.allSelected">-->
<!--                                            </div>-->
<!--                                          </td>-->
<!--                                        </div>-->
<!--                                      </div>-->
<!--                                    </div>-->
<!--                                  </div>-->
<!--                                  <div *ngIf="editable && !urlid">-->
<!--                                    <td>-->
<!--                                      <div *ngIf="(eba_pass.eba_pass_no === null || eba_pass.eba_pass_exp_date === null)">-->
<!--                                        <input type="checkbox" class="selectItem" [(ngModel)]="member.allSelected" (change)="updateRelationSelection(servant, member)" >-->
<!--                                      </div>-->
<!--                                    </td>-->
<!--                                  </div>-->
<!--                                  <td>{{ j + 1 }}</td>-->
                                  <td>
                                    <span>{{ member!.pivot!.rel_name }}</span>
                                  </td>
                                  <td>
                                    <span>{{ member!.rel_desc }}</span>
                                  </td>
                                  <td>
                                    <span>{{ member!.pivot!.rel_mobile_no }}</span>
                                  </td>
                                  <td>
                                    <span>{{ member!.pivot!.rel_dob | date:'dd-MM-yyyy'}}</span>
                                  </td>
                                  <td>
                                    <div>
                                      <div *ngIf="eba_pass?.eba_pass_no !== null">
                                        {{ eba_pass.eba_pass_no }}
                                      </div>

                                      <div style="color: blue;" *ngIf="eba_pass?.eba_pass_no === null">
                                        new
                                      </div>
                                    </div>
                                  </td>
                                  <td *ngIf="!urlid && editable">
                                    {{eba_pass.eba_pass_exp_date | date:'dd-MM-yyyy'}}
                                  </td>


                                  <td>
                                    <div   *ngIf="eba_pass.photo_path && eba_pass.photo_path!==null">
<!--                                      <ng-container *ngIf="eba_pass.photo_path.startsWith('http')">-->
                                        <!-- Render image if photo_path starts with 'http' -->
                                        <img [src]="eba_pass.photo_path" style="width: 150px; height: 128px" class="rounded-square" />
<!--                                      </ng-container>-->
<!--                                      <ng-container *ngIf="!eba_pass.photo_path.startsWith('http')">-->
                                        <!-- Render button/link if photo_path does not start with 'http' -->
<!--                                        <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="photo" (click)="openFileInNewPage(i,j,'photo')">-->
<!--                                          <i class="bi bi-eye"></i>-->
<!--                                        </a>-->
<!--                                      </ng-container>-->
                                    </div>
                                  </td>
                                  <td  >
                                    <div   *ngIf="eba_pass.sign_path && eba_pass.sign_path!==null">
<!--                                      <ng-container *ngIf="eba_pass.sign_path.startsWith('http')">-->
                                        <!-- Render image if photo_path starts with 'http' -->
                                        <img [src]="eba_pass.sign_path" style="width: 150px; height: 128px" class="rounded-square" />
<!--                                      </ng-container>-->
<!--                                      <ng-container *ngIf="!eba_pass.sign_path.startsWith('http')">-->
<!--                                        &lt;!&ndash; Render button/link if photo_path does not start with 'http' &ndash;&gt;-->
<!--                                        <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="sign" (click)="openFileInNewPage(i,j,'sign')">-->
<!--                                          <i class="bi bi-eye"></i>-->
<!--                                        </a>-->
<!--                                      </ng-container>-->
                                    </div>
                                  </td>
                                  <td  >
<!--                                    <ng-container *ngIf="eba_pass.id_proof_path && eba_pass.id_proof_path !==null && eba_pass?.id_proof_path?.startsWith('http')">-->
                                      <!-- Render image if photo_path starts with 'http' -->
                                      <img [src]="eba_pass.id_proof_path" style="width: 150px; height: 128px" class="rounded-square" />
<!--                                    </ng-container>-->
<!--                                    <ng-container *ngIf="eba_pass.id_proof_path && eba_pass.id_proof_path !==null && !eba_pass?.id_proof_path?.startsWith('http')">-->
<!--                                      &lt;!&ndash; Render button/link if photo_path does not start with 'http' &ndash;&gt;-->
<!--                                      <a class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="id proof" (click)="openFileInNewPage(i,j,'id')">-->
<!--                                        <i class="bi bi-eye"></i>-->
<!--                                      </a>-->
<!--                                    </ng-container>-->
                                  </td>
                                  <ng-container *ngIf="urlid && !editable">
                                    <ng-container *ngIf="(user && user.role)" >
                                      <ng-container *ngFor="let role of user.role">
                                        <ng-container *ngIf="role.role_id === 4">
                                          <td>
                                            <input type="date" class="form-control" [(ngModel)]="eba_pass.eba_pass_exp_date" [min]="minDate"
                                                   [value]="getDefaultExpDate(i,k,j,'servant_rel')">
                                          </td>
                                          <td>
                                            <textarea class="form-control" [(ngModel)]="eba_pass.remark"></textarea>
                                          </td>
                                        </ng-container>
                                        <ng-container *ngIf="role.role_id === 5 || role.role_id === 6">
                                          <td>
                                            <div *ngIf="eba_pass.eba_pass_exp_date">
                                              {{eba_pass.eba_pass_exp_date | date:'dd-MM-yyyy'}}
                                            </div>
                                          </td>
                                          <td>
                                            <div *ngIf="eba_pass.remark">
                                              {{eba_pass.remark}}
                                            </div>
                                          </td>
                                        </ng-container >
                                      </ng-container>
                                    </ng-container>
                                  </ng-container>

                                </ng-container>
                              </ng-container>
                            </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                  <br>
                </div>
                <ng-container *ngIf="servant && servant.vehicles && servant.vehicles.length > 0">
                <h5 class="card-title" style=" color: saddlebrown" *ngIf="servant && servant.vehicles && servant.vehicles.length > 0">Domestic help's Vehicle Details
                  <button type="button" *ngIf="editable && !urlid" class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)" (click)="addVehicle(i)">
                    Add vehicle
                  </button>
                </h5>
                <hr class="row-divider">
                <div class="row">
                  <div class="col-md">
                    <div class="card table-responsive">
                      <div class="card-body">
                        <table class="table table-stripped">
                          <thead>
                          <tr>
                            <!--                              <div *ngIf="urlid">-->
                            <!--                                <div *ngIf="(user && user.role)" >-->
                            <!--                                  <div *ngFor="let role of user.role">-->
                            <!--                                    <div *ngIf="role.role_id === 4">-->
                            <!--                                      <th>-->
                            <!--                                        &nbsp;-->
                            <!--                                      </th>-->
                            <!--                                    </div>-->
                            <!--                                  </div>-->
                            <!--                                </div>-->
                            <!--                              </div>-->
                            <th>Sl No.</th>
                            <th>Vehicle Type</th>
                            <th>Vehicle Name.</th>
                            <th>Vehicle No.</th>
                            <th>Registered owner</th>
                            <th *ngIf="editable && !urlid">Action</th>
                          </tr>
                          </thead>
                          <tbody>
                          <tr *ngFor="let vehicle of servant!.vehicles; let k = index">
                              <td>{{ k+1 }}</td>
                              <td>
                                <div *ngIf="editable && !urlid">
                                  <select class="form-control" [(ngModel)]="vehicle.vehicle_type" >
                                    <option >--Select Type--</option>
                                    <option [ngValue]="'S'">Scooty</option>
                                    <option [ngValue]="'M'">Motorcycle</option>
                                    <option [ngValue]="'C'">Car</option>
                                  </select>
                                </div>
                                <div *ngIf="urlid && !editable">
                                  {{
                                  vehicle!.vehicle_type === 'S' ? 'Scooty' :
                                          vehicle!.vehicle_type === 'M' ? 'Motorcycle' :
                                                  vehicle!.vehicle_type === 'C' ? 'Car' :
                                                          'N/A'
                                  }}
                                </div>
                              </td>
                              <td>
                                <div *ngIf="editable && !urlid">
                                  <input type="text" class="form-control" [(ngModel)]="vehicle.model_name">
                                </div>
                                <div *ngIf="urlid && !editable">
                                  {{vehicle.vehicle_type}}
                                </div>
                              </td>
                              <td>
                                <div *ngIf="editable && !urlid">
                                  <input type="text" class="form-control" [(ngModel)]="vehicle.vehicle_no">
                                </div>
                                <div *ngIf="urlid && !editable">
                                  {{vehicle.vehicle_no}}
                                </div>
                              </td>
                              <td>
                                <div *ngIf="editable && !urlid">
                                  <input type="text" class="form-control" [(ngModel)]="vehicle.vehicle_owner">
                                </div>
                                <div *ngIf="urlid && !editable">
                                  {{vehicle.vehicle_owner}}
                                </div>
                              </td>
                              <td *ngIf="editable && !urlid">
                                <button type="button" class="btn btn-outline-danger enlarge-on-hover" (click)="hoverClick($event)" (click)="removeVehicle(i,k)">
                                  Remove
                                </button>
                              </td>
                            </tr>

                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
                </ng-container>
              </div>
            </div>
            <br>
          </div>
        </div>
      </div>

    <div class="row" *ngIf="editable && !urlid && employee && ((applyingforRelative && employee!.relations! && employee!.relations!.length! > 0) ||(!applyingforRelative && employee!.servants! && employee!.servants!.length! > 0))">
<!--      <div class="row"  *ngIf="editable && !urlid">-->
        <div class="col-md-10" style="font-size: 200%; ">
          &nbsp;
        </div>
        <div class="col-md-2">
          <button class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" (click)="openUploadPopup()">
            Upload details
          </button>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6  " style="font-size: 200%; ">
          &nbsp;
        </div>
        <div class="col-md-6" style="color: red;text-align: right" *ngIf="editable && applyingforRelative && !urlid && employee && (!employee.relations || employee.relations.length == 0)">
          Family data is not inserted. Kindly insert details through
          <button class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" [routerLink]="'/profile/edit'">
            Profile
          </button>
        </div>
        <div class="col-md-6" style="color: red;text-align: right" *ngIf="editable && !applyingforRelative && !urlid && employee && (!employee.servants || employee.servants.length == 0)">
          Domestic Help data is not inserted. Kindly insert details through
          <button class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" [routerLink]="'/profile/edit'">
            Profile
          </button>
        </div>
      </div>

      <td *ngIf="editable && !urlid">
        <ng-container>
          <div class="modal modal-above-header"
               tabindex="-1" data-bs-backdrop="false"
               [ngStyle]="{'display': displayUpload }" style="backdrop-filter: blur(3px);background-color: rgba(128, 128, 128, 0.7); overflow-y: auto; max-height: 80vh; margin-top: 100px;">
            <div class="modal-dialog modal-dialog-centered modal-xl">
              <div class="modal-content">
                <!--            <div class="modal-header">-->
                <!--              <h5 class="modal-title">-->
                <!--                <b>Enter photo signature and id proof </b>-->
                <!--              </h5>-->
                <!--            </div>-->
                <div class="modal-body" >
                  <div *ngIf="applyingforRelative && editable && !urlid && employee && employee.relations && employee.relations.length > 0 ">
                    <table class="table table-stripped">
                      <thead>
                      <tr>
                        <th>Relative Name</th>
                        <th>Eba Pass NO</th>
                        <th>Upload Photo</th>
                        <th>Upload Signature</th>
                        <th>Upload ID Proof</th>
                      </tr>
                      </thead>
                      <ng-container *ngFor="let member of employee?.relations; let i = index">
                        <ng-container *ngIf="member?.allSelected && member?.pivot?.eba_passes ">
                          <tbody>
                          <tr *ngFor="let eba_pass of member.pivot.eba_passes; let j = index">
                            <td>
                              <span>{{ member!.pivot!.rel_name }}</span>
                            </td>
                            <td>
                              <div *ngIf="eba_pass.eba_pass_no !== null ">
                                {{ eba_pass.eba_pass_no }}
                              </div>
                              <div style="color: blue;" *ngIf="eba_pass?.eba_pass_no === null ">
                                new
                              </div>
                            </td>

                            <!-- Column for 'photo_path' -->
                            <td>
                              <div class="input-group">
                                <label [for]="'photo'+i+j" class="upload-icon-label" *ngIf="editable" title="Upload Photo">
                                  <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>
                                </label>
                                <input type="file" class="custom-file-input" [id]="'photo'+i+j" style="display: none"
                                       (change)="onProfilePhotoSelected($event,i,j,0,'photo_path')" *ngIf="editable"
                                       [(ngModel)]="eba_pass.photo_path">
                                <img [src]="eba_pass?.photo_path" style="width: 150px; height: 128px" class="rounded-square" />
                              </div>
                            </td>

                            <!-- Column for 'sign_path' -->
                            <td>
                              <div class="input-group">
                                <label [for]="'signature'+ i + j" class="upload-icon-label" *ngIf="editable" title="signature">
                                  <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>
                                </label>
                                <input type="file" class="custom-file-input" [id]="'signature' + i + j" style="display: none"
                                       (change)="onProfilePhotoSelected($event,i,j,0,'signature')" *ngIf="editable"
                                       [(ngModel)]="eba_pass.sign_path">
                                <img [src]="eba_pass?.sign_path" style="width: 150px; height: 128px" class="rounded-square" />
                              </div>
                            </td>

                            <!-- Column for 'id_proof_path' -->
                            <td>
                              <div class="input-group">
                                <label [for]="'idPath'+ i + j" class="upload-icon-label" *ngIf="editable" title="signature">
                                  <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>
                                </label>
                                <input type="file" class="custom-file-input" [id]="'idPath' + i + j" style="display: none"
                                       (change)="onProfilePhotoSelected($event,i,j,0,'id_proof_path')" *ngIf="editable"
                                       [(ngModel)]="eba_pass.id_proof_path">
                                <img [src]="eba_pass?.id_proof_path" style="width: 150px; height: 128px" class="rounded-square" />
                              </div>
                            </td>
                          </tr>
                          </tbody>
                        </ng-container>
                      </ng-container>
                    </table>
                  </div>

                  <div *ngIf="!applyingforRelative && editable && !urlid && employee && employee.servants && employee.servants.length > 0">
                    <table class="table table-stripped">
                      <thead>
                      <tr>
                        <th>Name</th>
                        <th>Eba Pass NO</th>
                        <th>Upload Photo</th>
                        <th>Upload Signature</th>
                        <th>Upload ID Proof</th>
                      </tr>
                      </thead>
                      <ng-container *ngFor="let servant of employee!.servants; let i = index">
                        <ng-container *ngIf="servant.allSelected  ">
                          <ng-container *ngIf="servant?.eba_passes ">
                            <tbody>
                            <tr *ngFor="let eba_pass of servant!.eba_passes; let k = index">
                              <td>
                                <span>{{ servant.servant_name }}</span>
                              </td>
                              <td>
                                <div *ngIf=" eba_pass.eba_pass_no !== null ">
                                  {{ eba_pass.eba_pass_no }}
                                </div>
                                <div style="color: blue;" *ngIf="eba_pass?.eba_pass_no === null ">
                                  new
                                </div>
                              </td>
                              <td>
                                <div class="input-group">
                                  <label [for]="'photo'+i+k" class="upload-icon-label" *ngIf="editable"
                                         title="Upload Photo">
                                    <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>
                                  </label>
                                  <input type="file" class="custom-file-input" [id]="'photo'+i+k"
                                         style="display: none" (change)="onProfilePhotoSelected($event,i,k,0,'photo_path')"
                                         *ngIf="editable" [(ngModel)]="eba_pass.photo_path">
                                  <img [src]="eba_pass?.photo_path" style="width: 150px; height: 128px"
                                       class="rounded-square" />
                                </div>
                              </td>
                              <td>
                                <div class="input-group">
                                  <label [for]="'signature'+ i + k" class="upload-icon-label" *ngIf="editable"
                                         title="signature">
                                    <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>

                                    <input type="file" class="custom-file-input" [id]="'signature' + i + k"
                                           style="display: none" (change)="onProfilePhotoSelected($event,i,k,0,'signature')"
                                           *ngIf="editable" [(ngModel)]="eba_pass.sign_path">
                                  </label>
                                  <img [src]="eba_pass?.sign_path" style="width: 150px; height: 128px"
                                       class="rounded-square" />
                                </div>
                              </td>
                              <td>
                                <div class="input-group">
                                  <label [for]="'idPath'+ i + k" class="upload-icon-label" *ngIf="editable"
                                         title="signature">
                                    <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>

                                    <input type="file" class="custom-file-input" [id]="'idPath' + i + k"
                                           style="display: none" (change)="onProfilePhotoSelected($event,i,k,0,'id_proof_path')"
                                           *ngIf="editable" [(ngModel)]="eba_pass.id_proof_path">
                                  </label>
                                  <img [src]="eba_pass?.id_proof_path" style="width: 150px; height: 128px"
                                       class="rounded-square" />
                                </div>
                              </td>
                            </tr>
                            </tbody>
                          </ng-container>
                          <ng-container *ngIf="servant!.relations && servant.relations.length >0">
                            <ng-container *ngFor="let member of servant!.relations; let f = index">
                              <ng-container *ngIf="member.allSelected && member.pivot.eba_passes && member.pivot.eba_passes.length > 0">
                                <tbody>
                                <tr *ngFor="let eba_pass of member.pivot.eba_passes; let g = index">
                                  <td>
                                    <span>{{ member!.pivot!.rel_name }}</span>
                                  </td>
                                  <td>
                                    <div *ngIf=" eba_pass.eba_pass_no !== null">
                                      {{ eba_pass.eba_pass_no }}
                                    </div>

                                    <div style="color: blue;" *ngIf="eba_pass?.eba_pass_no === null ">
                                      new
                                    </div>
                                  </td>
                                  <td>
                                    <div class="input-group">
                                      <label [for]="'photo'+i+f+g" class="upload-icon-label" *ngIf="editable"
                                             title="Upload Photo">
                                        <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>
                                      </label>
                                      <input type="file" class="custom-file-input" [id]="'photo'+i+f+g"
                                             style="display: none" (change)="onProfilePhotoSelected($event,i,f,g,'photo')"
                                             *ngIf="editable" [(ngModel)]="eba_pass.photo_path">
                                      <img [src]="eba_pass?.photo_path" style="width: 150px; height: 128px"
                                           class="rounded-square" />
                                    </div>
                                  </td>
                                  <td>
                                    <div class="input-group">
                                      <label [for]="'signature'+ i + f+g" class="upload-icon-label" *ngIf="editable"
                                             title="signature">
                                        <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>

                                        <input type="file" class="custom-file-input" [id]="'signature' + i + f +g"
                                               style="display: none" (change)="onProfilePhotoSelected($event,i,f,g,'sign')"
                                               *ngIf="editable" [(ngModel)]="eba_pass.sign_path">
                                      </label>
                                      <img [src]="eba_pass?.sign_path" style="width: 150px; height: 128px"
                                           class="rounded-square" />
                                    </div>
                                  </td>
                                  <td>
                                    <div class="input-group">
                                      <label [for]="'idPath'+ i + f+g" class="upload-icon-label" *ngIf="editable"
                                             title="signature">
                                        <i class="bi bi-cloud-arrow-up btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)"></i>

                                        <input type="file" class="custom-file-input" [id]="'idPath' + i + f +g"
                                               style="display: none" (change)="onProfilePhotoSelected($event,i,f,g,'id_proof')"
                                               *ngIf="editable" [(ngModel)]="eba_pass.id_proof_path">
                                      </label>
                                      <img [src]="eba_pass?.id_proof_path" style="width: 150px; height: 128px"
                                           class="rounded-square" />
                                    </div>
                                  </td>
                                </tr>
                                </tbody>
                              </ng-container>
                            </ng-container>
                          </ng-container>
                        </ng-container>
                      </ng-container>
                    </table>
                  </div>
                </div>
                <div class="modal-footer">
                  <div class="col" style="color: red" >
                    Photograph & Signature can be captured For Your Application at Gate No-17,35 & 31
                  </div>
                  <button type="button" class="btn btn-outline-secondary enlarge-on-hover" (click)="hoverClick($event)" (click)="closeUploadPopup()">
                    Close
                  </button>

                  <button type="button" class="btn btn-outline-info enlarge-on-hover" (click)="hoverClick($event)" (click)="applyEba()">
                    Submit Form
                  </button>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
      </td>
<!--    </div>-->
  </div>

  <div class="col-md-2" *ngIf="urlid && !editable">
    <br><br>
    <div class="card shadow">
      <div class="card-body">
        <div class="spacing" style="margin-top: 3%;"></div>
        <strong><label style="font-size: 130%" for="remarks">Note:</label></strong>
        <div class="spacing" style="margin-top: 2%;"></div>
        <div class="row" style="margin-left: 0%; margin-right: 1.5%;">
          <textarea class="form-control" id="remarks" name="remarks" style="height: 200px;" placeholder="abc...." [(ngModel)]="remark"></textarea>
        </div>

        <div class="row" style="text-align: center">
          <div class="col-md-6" style="text-align: right">
            <label class="upload-icon-label" [for]="'file_path'"
                   title="Upload file">
              <i class="bi bi-cloud-arrow-up btn btn-outline-success enlarge-on-hover" (click)="hoverClick($event)"></i>
            </label>
          </div>

<!--          ngif picexist-->
          <div class="col-md-6" style="text-align: left" *ngIf="file_path">
            <label class="upload-icon-label"
                   title="remove file">
              <i class="bi bi-trash3 btn btn-outline-danger enlarge-on-hover" (click)="hoverClick($event)" (click)="removeFile()" ></i>
            </label>
          </div>

          <input type="file" class="custom-file-input" [(ngModel)]="file_path" (change)="onProfilePhotoSelected($event,0,0,0,'file_path')"
                 style="display: none" [id]="'file_path'">
          <br>

          <img [src]="file_path" [style.display]="file_path ? 'block' : 'none'" />

        </div>
        <div class="row">
          <div class="col-6" style="text-align: right">
            <button type="submit" class="btn btn-success enlarge-on-hover" (click)="hoverClick($event)" name="submit" value="Approve" (click)="approveapplication()" >Forward</button>
          </div>
          <div class="col-6" style="text-align: left">
            <button type="submit" class="btn btn-danger enlarge-on-hover" (click)="hoverClick($event)" name="submit" value="Return" (click)="returnapplication()">Return</button>
          </div>
        </div>
      </div>
    </div>
  </div>


</div>


<ng-container  *ngIf=" urlid && !editable && employee && employee.eba_applicationsstatus != null && employee.eba_applicationsstatus.length > 0">
  <ng-container  *ngFor="let application of employee!.eba_applicationsstatus; let j = index">
    <div class="card shadow" style="background-color: #bde3f3; width: 72.5%;margin-left: 1%" >
      <div class="card-header">
        <div class="row">
          <div class="col-md-6" style="text-align: left;font-style: italic">
            <strong>Note #{{j+1}}</strong>
          </div>
          <div class="col-md-6" style="text-align: right" *ngIf="application.file_path && application.file_path!==null">
            <a  class="btn btn-primary enlarge-on-hover" (click)="hoverClick($event)" title="id proof" (click)="openFileInNewPage(j,0,'remarkfile')" >
              <i class="bi bi-eye"></i>
            </a>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col">
            {{application.remarks}}<br><br>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <div class="row">
          <div class="col-md-6" style="text-align: left">
            &nbsp;<br>
            <b> {{application.created_at | date:'dd-MM-yyyy'}}</b>
          </div>
          <div class="col-md-6" style="text-align: right">
            <strong>{{application.created_by}}</strong><br>{{application.desg_desc}}
          </div>
        </div>
      </div>
    </div>
    <br>
  </ng-container>
</ng-container>
</div>
